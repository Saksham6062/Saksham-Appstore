<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My App Store</title>
<style>
/* ---------- GENERAL ---------- */
body {
  font-family: Arial, sans-serif;
  margin: 0;
  background-color: #f4f4f4;
  color: #333;
}
header {
  background-color: #7c3aed;
  color: white;
  text-align: center;
  padding: 20px;
}
header input {
  margin-top: 10px;
  padding: 8px;
  width: 80%;
  max-width: 400px;
  border-radius: 5px;
  border: none;
}
main {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  padding: 20px;
  gap: 20px;
}

/* ---------- APP CARDS ---------- */
.app-card {
  background-color: white;
  width: 240px;
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  padding: 15px;
  text-align: center;
  transition: transform 0.2s;
}
.app-card:hover {
  transform: scale(1.05);
}
.app-card img.icon {
  width: 60px;
  height: 60px;
  object-fit: contain;
  border-radius: 12px;
  margin-bottom: 10px;
}
.app-card h2 {
  font-size: 18px;
  margin: 5px 0;
}
.app-card a.download-btn {
  display: inline-block;
  padding: 8px 12px;
  background-color: #7c3aed;
  color: white;
  text-decoration: none;
  border-radius: 5px;
  font-size: 14px;
  margin-bottom: 10px;
}
.app-card a.download-btn:hover {
  background-color: #5b21b6;
}
.app-card p {
  font-size: 14px;
  margin: 10px 0;
}
.screenshots {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.screenshots img {
  width: 100%;
  height: 120px;
  object-fit: cover;
  border-radius: 10px;
  cursor: pointer;
  transition: transform 0.2s;
}
.screenshots img:hover {
  transform: scale(1.03);
}

/* ---------- MODAL POPUP ---------- */
.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0; top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.85);
  justify-content: center;
  align-items: center;
}
.modal img {
  max-width: 90%;
  max-height: 85%;
  border-radius: 10px;
  box-shadow: 0 0 20px rgba(255,255,255,0.2);
}
.modal span {
  position: absolute;
  top: 20px;
  right: 30px;
  color: white;
  font-size: 30px;
  font-weight: bold;
  cursor: pointer;
}
</style>
</head>
<body>

<header>
  <h1>My App Store</h1>
  <input type="text" id="search" placeholder="Search apps...">
</header>

<main id="app-list">
  <!-- App cards load here -->
</main>

<!-- Modal for screenshot preview -->
<div id="modal" class="modal">
  <span id="closeModal">&times;</span>
  <img id="modalImage" src="" alt="Screenshot">
</div>

<script>
// üîó URL of your GitHub apps.json file
const appsJSONUrl = "https://raw.githubusercontent.com/yourusername/yourrepo/main/apps.json";
const appList = document.getElementById('app-list');

// Load app data
fetch(appsJSONUrl)
  .then(res => res.json())
  .then(apps => {
    function displayApps(filter = "") {
      appList.innerHTML = "";
      apps.forEach(app => {
        if (app.name.toLowerCase().includes(filter.toLowerCase())) {
          const card = document.createElement('div');
          card.className = 'app-card';

          // Screenshots
          let screenshotsHTML = "";
          if (app.screenshots && app.screenshots.length > 0) {
            screenshotsHTML = `
              <div class="screenshots">
                ${app.screenshots.map(src => `<img src="${src}" alt="${app.name} Screenshot" class="screenshot">`).join('')}
              </div>`;
          }

          // Card content
          card.innerHTML = `
            <img class="icon" src="${app.icon}" alt="${app.name} Icon">
            <h2>${app.name}</h2>
            <a class="download-btn" href="${app.download}" target="_blank">Download</a>
            <p>${app.description}</p>
            ${screenshotsHTML}
          `;
          appList.appendChild(card);
        }
      });

      // Enable modal popup for all screenshots
      document.querySelectorAll('.screenshot').forEach(img => {
        img.addEventListener('click', () => openModal(img.src));
      });
    }

    displayApps();

    document.getElementById('search').addEventListener('input', e => {
      displayApps(e.target.value);
    });
  })
  .catch(err => {
    appList.innerHTML = "<p style='text-align:center;color:red;'>‚ùå Failed to load apps. Check your JSON URL.</p>";
  });

// ---------- MODAL LOGIC ----------
const modal = document.getElementById('modal');
const modalImage = document.getElementById('modalImage');
const closeModal = document.getElementById('closeModal');

function openModal(src) {
  modal.style.display = 'flex';
  modalImage.src = src;
}
closeModal.onclick = () => modal.style.display = 'none';
window.onclick = (e) => { if (e.target === modal) modal.style.display = 'none'; };
</script>

</body>
</html>
